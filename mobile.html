<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="icon" href="data:,">
    <title>Invoice App - Employee</title>
    <link rel="stylesheet" href="mobile-styles.css">
</head>
<body>
    <div class="mobile-container">
        <header class="mobile-header">
            <div class="mobile-header-content">
                <div>
                    <h1>üìÑ Invoice App</h1>
                    <p class="employee-badge">Employee Access</p>
                </div>
                <button id="mobileLogoutBtn" class="mobile-logout-btn">Logout</button>
            </div>
        </header>

        <div class="mobile-tabs">
            <button class="mobile-tab active" data-tab="invoice">Create Invoice</button>
            <button class="mobile-tab" data-tab="invoices">View Invoices</button>
            <button class="mobile-tab" data-tab="customer">Add Customer</button>
        </div>

        <!-- Invoice Creation Form - PREMIUM CLEAN FLOW -->
        <div id="invoiceTab" class="mobile-tab-content active">
            <form id="mobileInvoiceForm" class="mobile-form">

                <!-- SINGLE SEARCH BAR SECTION - Will hide after selection -->
                <div id="searchSection" class="form-group">
                    <label for="mobileSearchInput">üîç Search Customer by Mobile Number</label>
                    <input type="tel" id="mobileSearchInput" list="mobileMobileNumbersList" required placeholder="Type 10-digit mobile number" autocomplete="off" style="font-size: 1.3em; padding: 20px; border-radius: 18px; border: 2px solid #2c3e50;">
                    <datalist id="mobileMobileNumbersList"></datalist>

                    <!-- Preview Card - NOW CLICKABLE TO SELECT -->
                    <div id="selectedCustomerPreview" class="customer-preview" style="display: none; margin-top: 20px; padding: 25px; background: linear-gradient(135deg, #2c3e50, #34495e); color: white; border-radius: 20px; text-align: center; font-size: 1.2em; box-shadow: 0 10px 25px rgba(0,0,0,0.2); cursor: pointer;" onclick="window.mobileInvoiceManager.selectCustomerFromPreview()">
                        <strong style="font-size: 1.4em; color: #ffd700;">Tap to Select Customer</strong><br><br>
                        <strong>Name:</strong> <span id="previewName" style="font-weight: bold; color: #ffd700;"></span><br>
                        <strong>Mobile:</strong> <span id="previewMobile" style="font-weight: bold; color: #ffd700;"></span><br>
                        <strong>Street:</strong> <span id="previewStreet" style="color: #ffd700;"></span><br><br>
                        <em style="font-size: 1.1em; color: #a0d8ff;">‚Üí Tap this card or press Enter to start billing</em>
                    </div>
                </div>

                <!-- PREMIUM CLEAN INVOICE SECTION -->
                <div id="customerInvoiceSection" style="display: none; margin-top: 20px; padding: 0 12px;">

                    <!-- Updated: Rectangle Light Grey Customer Card - Centered + Theme Matched -->
                    <div class="selected-customer-card" style="margin: 20px auto; max-width: 92%; padding: 24px 16px; background: #f5f5f5; border-radius: 12px; border: 1px solid #e0e0e0; box-shadow: 0 4px 15px rgba(0,0,0,0.08); text-align: center;">
                        <h3 style="margin: 0 0 18px 0; font-size: 1.5em; font-weight: 700; color: #2c3e50; letter-spacing: -0.5px;">
                            Selected Customer
                        </h3>
                        <div style="font-size: 1.2em; line-height: 1.7; color: #333333;">
                            <strong style="color: #4a4a4a; font-weight: 600;">Name:</strong> 
                            <span id="displayCustomerName" style="font-weight: bold; color: #2c3e50;"></span><br>
        
                            <strong style="color: #4a4a4a; font-weight: 600;">Mobile:</strong> 
                            <span id="displayMobile" style="font-weight: bold; color: #2c3e50;"></span><br>
        
                            <strong style="color: #4a4a4a; font-weight: 600;">Street:</strong> 
                            <span id="displayStreet" style="color: #2c3e50;"></span>
                        </div>
                    </div>

                    <!-- Invoice Date & Number - Moved ABOVE Invoice Items, Clean Centered Layout -->
                    <div class="invoice-header-group" style="display: flex; flex-wrap: wrap; justify-content: center; gap: 24px; margin: 24px 0; padding: 0 12px;">
                        <!-- Invoice Date Card -->
                        <div class="invoice-info-card" style="flex: 1; min-width: 160px; max-width: 220px; text-align: center; background: #ffffff; border-radius: 16px; padding: 16px; box-shadow: 0 4px 12px rgba(0,0,0,0.08);">
                            <label style="font-size: 1em; color: #4a4a4a; font-weight: 500; display: block; margin-bottom: 8px;">Invoice Date</label>
                            <span id="mobileInvoiceDate" style="font-size: 1.5em; font-weight: bold; color: #2c3e50;"></span>
                        </div>
                        
                        <!-- Invoice Number Card -->
                        <div class="invoice-info-card" style="flex: 1; min-width: 160px; max-width: 220px; text-align: center; background: #2c3e50; border-radius: 16px; padding: 16px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);">
                            <label style="font-size: 1em; color: rgba(255,255,255,0.8); font-weight: 500; display: block; margin-bottom: 8px;">Invoice No</label>
                            <span id="mobileInvoiceNumber" style="font-size: 1.5em; font-weight: bold; color: white;"></span>
                        </div>
                    </div>

                    <!-- Single Invoice Items Section (No duplicate) -->
                    <div style="background: white; border-radius: 24px; padding: 20px; box-shadow: 0 12px 35px rgba(0,0,0,0.15); margin-bottom: 30px;">
                        <!-- Only ONE heading -->
                        <h3 style="text-align: center; margin-bottom: 20px; color: #2c3e50; font-size: 1.6em; font-weight: 700;">
                            Invoice Items
                        </h3>

                        <table class="mobile-items-table" style="width: 100%; border-collapse: separate; border-spacing: 0 10px;">
                            <thead>
    <tr style="background: #2c3e50 !important; color: white !important; border-radius: 16px;">
        <th style="padding: 16px; text-align: left; border-radius: 16px 0 0 16px;">Description</th>
        <th style="padding: 16px;">Qty</th>
        <th style="padding: 16px;">Price (‚Çπ)</th>
        <th style="padding: 16px;">Total</th>
        <th style="border-radius: 0 16px 16px 0;"></th>
    </tr>
</thead>
                            <tbody id="mobileItemsTableBody" style="background: #f8f9fa;"></tbody>
                        </table>

                        <button type="button" id="mobileAddItemBtn" class="mobile-add-item-btn" style="margin-top: 20px; width: 100%; padding: 16px; font-size: 1.3em; background: #2c3e50; border-radius: 18px; color: white;">
                            + Add Item
                        </button>
                    </div>

                    <!-- Grand Total Premium Highlight -->
                    <div style="text-align: center; margin: 50px 0;">
                        <div class="grand-total" style="font-size: 2.2em;">
                            <strong style="color: #2c3e50;">Grand Total:</strong>
                            <span id="mobileGrandTotal" style="color: #e74c3c; font-weight: bold; font-size: 1.2em;">‚Çπ0</span>
                        </div>
                    </div>

                    <!-- Premium Buttons -->
                    <div style="text-align: center;">
                        <button type="submit" class="mobile-btn mobile-btn-primary" style="font-size: 1.6em; padding: 22px 60px; border-radius: 30px; background: linear-gradient(135deg, #27ae60, #2ecc71); box-shadow: 0 10px 25px rgba(39,174,96,0.3);">Generate Invoice</button>
                        <button type="button" id="mobilePrintBtn" class="mobile-btn mobile-btn-secondary" style="display:none; font-size: 1.6em; padding: 22px 60px; margin-top: 25px; border-radius: 30px;">Print Invoice</button>
                    </div>
                </div>
            </form>
        </div>

        <!-- View Invoices Tab -->
        <div id="invoicesTab" class="mobile-tab-content">
            <div class="mobile-filters-icon">
                <div class="filter-item">
                    <label>üìÖ Date</label>
                    <input type="date" id="mobileDateFilter" class="mobile-filter-input">
                </div>
                <div class="filter-item">
                    <label>üè† Street</label>
                    <select id="mobileStreetFilter" class="mobile-filter-select">
                        <option value="all">All Streets</option>
                    </select>
                </div>
                <div class="filter-item">
                    <label>üí≥ Status</label>
                    <select id="mobileStatusFilter" class="mobile-filter-select">
                        <option value="all">All</option>
                        <option value="paid">Paid</option>
                        <option value="unpaid">Unpaid</option>
                    </select>
                </div>
                <div class="filter-item">
                    <label>üì± Mobile</label>
                    <input type="tel" id="mobileInvoiceSearch" placeholder="Search mobile" class="mobile-filter-input">
                </div>
            </div>
            <div id="mobileInvoiceList" class="mobile-invoice-list"></div>
        </div>

        <!-- Add Customer Tab -->
        <div id="customerTab" class="mobile-tab-content">
            <form id="mobileCustomerForm" class="mobile-form">
                <div class="form-group">
                    <label for="newCustomerName">Customer Name</label>
                    <input type="text" id="newCustomerName" required placeholder="Enter name">
                </div>
                <div class="form-group">
                    <label for="newMobileNumber">Mobile Number</label>
                    <input type="tel" id="newMobileNumber" required pattern="[0-9]{10}" placeholder="10 digit mobile">
                </div>
                <div class="form-group">
                    <label for="newStreetName">Street Name</label>
                    <input type="text" id="newStreetName" list="newStreetNamesList" required placeholder="Select or type street">
                    <datalist id="newStreetNamesList"></datalist>
                </div>
                <div class="mobile-form-actions">
                    <button type="submit" class="mobile-btn mobile-btn-primary">Add Customer</button>
                    <button type="reset" class="mobile-btn mobile-btn-secondary">Clear</button>
                </div>
            </form>
        </div>

        <div class="mobile-footer">
            <p>Employee Access - Full Invoice Creation</p>
        </div>
    </div>

    <!-- Hidden Print Template -->
    <div id="mobilePrintArea" style="display: none;">
        <div class="print-invoice">
            <h2>INVOICE</h2>
            <div class="print-header">
                <p><strong>Invoice No:</strong> <span id="mobilePrintInvoiceNo"></span></p>
                <p><strong>Date:</strong> <span id="mobilePrintDate"></span></p>
            </div>
            <div class="print-customer">
                <p><strong>Customer:</strong> <span id="mobilePrintCustomer"></span></p>
                <p><strong>Mobile:</strong> <span id="mobilePrintMobile"></span></p>
                <p><strong>Street:</strong> <span id="mobilePrintStreet"></span></p>
            </div>
            <table class="print-table">
                <thead>
                    <tr>
                        <th>Item</th>
                        <th>Qty</th>
                        <th>Price</th>
                        <th>Total</th>
                    </tr>
                </thead>
                <tbody id="mobilePrintItems"></tbody>
            </table>
            <div class="print-footer">
                <p><strong>Grand Total: ‚Çπ<span id="mobilePrintGrandTotal"></span></strong></p>
            </div>
            <p class="print-thankyou">Thank you for your business!</p>
        </div>
    </div>

    <script src="auth-utils.js"></script>
    <script src="mobile-script.js"></script>
</body>
</html>